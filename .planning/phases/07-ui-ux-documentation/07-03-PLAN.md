---
phase: 07-ui-ux-documentation
plan: 03
type: execute
wave: 2
depends_on: ["07-01"]
files_modified:
  - .planning/phases/07-ui-ux-documentation/KEYBOARD-SHORTCUTS.md
  - .planning/phases/07-ui-ux-documentation/RESPONSIVE-BEHAVIOR.md
autonomous: true

must_haves:
  truths:
    - "Every keyboard shortcut is documented with key, scope, condition, action, and visual feedback"
    - "Three interaction modes documented (navigation, panel, popup) with which shortcuts are active in each"
    - "All three breakpoints documented (mobile max-600px, tablet max-768px, desktop 1440px+) with per-component changes"
    - "Mobile booking panel full-screen behavior documented with backdrop"
    - "Hidden elements on mobile documented (hints bar, week toggle)"
    - "User hotkeys documented as dynamic (from config, not hardcoded)"
  artifacts:
    - path: ".planning/phases/07-ui-ux-documentation/KEYBOARD-SHORTCUTS.md"
      provides: "Complete keyboard shortcut reference with context-aware modes and conditional behavior"
      min_lines: 100
    - path: ".planning/phases/07-ui-ux-documentation/RESPONSIVE-BEHAVIOR.md"
      provides: "All responsive breakpoints with per-component layout changes and screenshot comparisons"
      min_lines: 80
  key_links:
    - from: "KEYBOARD-SHORTCUTS.md"
      to: "extracted-code/src/hooks/useKeyboard.js"
      via: "Shortcut definitions extracted from keyboard handler"
      pattern: "key.*=="
    - from: "RESPONSIVE-BEHAVIOR.md"
      to: "Phase 5 screenshots 06-responsive/"
      via: "Before/after screenshot comparisons"
      pattern: "06-responsive/"
    - from: "RESPONSIVE-BEHAVIOR.md"
      to: "Component CSS @media queries"
      via: "Breakpoint extraction from media queries"
      pattern: "@media"
---

<objective>
Document all keyboard shortcuts with their conditional behavior rules, and all responsive breakpoints with per-component layout adaptations.

Purpose: Keyboard shortcuts tell the Rails developer WHAT keys do WHAT and WHEN. Responsive behavior tells them HOW the layout adapts at each breakpoint. These complete the UI/UX specification covering UIUX-05 (keyboard shortcuts) and UIUX-06 (responsive breakpoints).

Output: KEYBOARD-SHORTCUTS.md and RESPONSIVE-BEHAVIOR.md in the phase directory.
</objective>

<execution_context>
@/Users/clintonweekes/.claude/get-shit-done/workflows/execute-plan.md
@/Users/clintonweekes/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-ui-ux-documentation/07-RESEARCH.md
@.planning/phases/07-ui-ux-documentation/07-01-SUMMARY.md
@.planning/phases/05-visual-capture/SCREENSHOT-MANIFEST.md
@.planning/phases/06-code-extraction/FILE-MANIFEST.md
@.planning/phases/06-code-extraction/extracted-code/src/hooks/useKeyboard.js
@.planning/phases/06-code-extraction/extracted-code/src/components/Header.css
@.planning/phases/06-code-extraction/extracted-code/src/components/TimeSlot.css
@.planning/phases/06-code-extraction/extracted-code/src/components/TimeStrip.css
@.planning/phases/06-code-extraction/extracted-code/src/components/BookingPanel.css
@.planning/phases/06-code-extraction/extracted-code/src/components/BookingPopup.css
@.planning/phases/06-code-extraction/extracted-code/src/components/BookingBlock.css
@.planning/phases/06-code-extraction/extracted-code/src/components/WeekView.css
@.planning/phases/06-code-extraction/extracted-code/src/components/WeekDayOverlay.css
@.planning/phases/06-code-extraction/extracted-code/src/components/WeekBookingBlock.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create KEYBOARD-SHORTCUTS.md</name>
  <files>.planning/phases/07-ui-ux-documentation/KEYBOARD-SHORTCUTS.md</files>
  <action>
Create a complete keyboard shortcut specification by extracting all shortcuts from useKeyboard.js. This is the most behavior-rich document in the phase -- keyboard shortcuts have complex conditional logic.

**Document structure:**

1. **Interaction Modes** -- The keyboard system operates in 3 modes. Document each:

   **Navigation Mode** (default -- no panel or popup open):
   Active shortcuts: B, W, T, Left/Right arrows, Up/Down arrows, Enter
   When: Neither booking panel nor popup is open

   **Panel Mode** (booking panel open -- creating new booking):
   Active shortcuts: User hotkeys (from config), 1/2/3 (duration), Escape
   When: Booking panel is open after clicking an available slot

   **Popup Mode** (editing existing booking):
   Active shortcuts: D, Escape, Enter, user hotkeys, 1/2/3 (duration)
   When: Popup is open after clicking an existing booking block

   Include a mode priority diagram:
   ```
   Keypress received
     |
     +-- Is popup open? -> POPUP MODE shortcuts only
     |
     +-- Is panel open? -> PANEL MODE shortcuts only
     |
     +-- Neither open -> NAVIGATION MODE shortcuts
   ```

2. **Global Validation** (applies to ALL modes):
   - Shortcuts are IGNORED when focus is in INPUT or TEXTAREA elements
   - Shortcuts are IGNORED when `enabled` is false
   - Source: useKeyboard.js:48-54

3. **Complete Shortcut Reference** -- Document each shortcut:

   **Navigation Mode Shortcuts:**

   | Key | Action | Condition | Visual Feedback | Source |
   |-----|--------|-----------|-----------------|--------|
   | B | Book Now (select current hour) | Current hour must be available (not booked, not past, within operating hours) | Jumps to today, scrolls to current hour, selects slot, opens panel | useKeyboard.js (search for 'b' case) |
   | W | Toggle Week/Day view | Always available in nav mode | View switches between day grid and week grid | useKeyboard.js (search for 'w' case) |
   | T | Toggle timezone (QLD/NSW) | Always available in nav mode | Timezone button changes state, all displayed times shift +/-1h | useKeyboard.js (search for 't' case) |
   | Left Arrow | Navigate to previous day (day view) or previous week (week view) | Always available in nav mode | Date display updates, time grid refreshes | useKeyboard.js (search for 'ArrowLeft') |
   | Right Arrow | Navigate to next day (day view) or next week (week view) | Always available in nav mode | Date display updates, time grid refreshes | useKeyboard.js (search for 'ArrowRight') |
   | Up Arrow | Move keyboard focus up one slot | Keyboard navigation active | Gold border moves to previous time slot | useKeyboard.js (search for 'ArrowUp') |
   | Down Arrow | Move keyboard focus down one slot | Keyboard navigation active | Gold border moves to next time slot | useKeyboard.js (search for 'ArrowDown') |
   | Enter | Select keyboard-focused slot | A slot has keyboard focus | Opens booking panel for focused slot | useKeyboard.js (search for 'Enter') |

   **Panel Mode Shortcuts:**

   | Key | Action | Condition | Visual Feedback | Source |
   |-----|--------|-----------|-----------------|--------|
   | [user key] | Select user for booking | Panel is open, user not yet selected or changing | User button highlights (selected state) | useKeyboard.js |
   | 1 | Select 1-hour duration | Panel is open, user selected, 1h available | Duration button highlights | useKeyboard.js |
   | 2 | Select 2-hour duration | Panel is open, user selected, 2h available (no conflict) | Duration button highlights | useKeyboard.js |
   | 3 | Select 3-hour duration | Panel is open, user selected, 3h available (no conflict) | Duration button highlights | useKeyboard.js |
   | Escape | Cancel and close panel | Panel is open | Panel slides out, slot deselects | useKeyboard.js |

   **Popup Mode Shortcuts:**

   | Key | Action | Condition | Visual Feedback | Source |
   |-----|--------|-----------|-----------------|--------|
   | D | Delete booking | Popup is open | Booking removed, popup closes | useKeyboard.js |
   | Escape | Close popup without changes | Popup is open | Popup fades out | useKeyboard.js |
   | Enter | Confirm changes and close | Popup is open | Popup fades out, changes saved | useKeyboard.js |
   | [user key] | Change booking's user | Popup is open | User button changes selection | useKeyboard.js |
   | 1/2/3 | Change booking's duration | Popup is open, new duration is valid (canPopupChangeDuration) | Duration button changes selection | useKeyboard.js |

4. **Dynamic User Hotkeys:**
   User hotkeys are NOT hardcoded -- they come from instance configuration.

   Config structure:
   ```json
   {
     "users": [
       { "name": "Jack", "key": "j" },
       { "name": "Bonnie", "key": "b" }
     ]
   }
   ```

   The keyboard handler iterates over `users` array and matches `e.key.toLowerCase()` to each user's `key` property. This means:
   - Different instances can have different users with different hotkeys
   - Hotkey labels shown in UI come from config, not CSS
   - Collision note: if a user's key is 'b', 'w', or 't', the user selection takes priority in panel/popup mode (those navigation shortcuts are inactive)

5. **Keyboard Hints Bar:**
   A visual bar in the header showing available shortcuts. Document:
   - Location: Below navigation buttons, above time grid
   - Style: Glass morphism container with cyan left-edge glow
   - Content: Displays configured shortcuts with `<kbd>` styled key indicators
   - Visibility: Hidden on mobile (max-width: 600px)
   - Screenshot: 01-initial-states/000-initial-load.png (visible in header area)
   - Source: Header.css:196-249

6. **Keyboard Focus Visual System:**
   - Focus indicator: Gold/amber border (#fbbf24) with pulsing animation
   - Distinct from selected state (cyan) to avoid confusion
   - Tab/arrow navigation moves focus between slots
   - Enter key activates focused slot
   - Source: TimeSlot.css:105-130
   - Note: Not captured in screenshots -- document from CSS source only

**Technology-neutral note:** Document WHAT each key does, not how it's implemented in React. Avoid useCallback, useEffect, event handler references. Frame as "when key X is pressed in mode Y, action Z occurs."
  </action>
  <verify>
Verify the document:
1. Count unique keyboard shortcuts documented -- must be >= 12 (B, W, T, Left, Right, Up, Down, Enter, Escape, D, 1, 2, 3, plus user keys)
2. Grep for "Mode" -- must document all 3 modes (Navigation, Panel, Popup)
3. Grep for "Condition" -- every shortcut must have a condition/scope
4. Grep for "config" or "dynamic" -- user hotkeys documented as config-driven
5. Grep for "useKeyboard" -- source references to keyboard handler
6. Verify line count >= 100 lines
  </verify>
  <done>
KEYBOARD-SHORTCUTS.md exists with: 3 interaction modes documented (navigation, panel, popup), complete shortcut table for each mode, dynamic user hotkey system from config, keyboard hints bar specification, keyboard focus visual system, and mode priority diagram. Every shortcut has: key, action, condition, visual feedback, and source reference.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create RESPONSIVE-BEHAVIOR.md</name>
  <files>.planning/phases/07-ui-ux-documentation/RESPONSIVE-BEHAVIOR.md</files>
  <action>
Create a responsive behavior specification documenting how the interface adapts at each breakpoint. Extract all @media queries from component CSS files and synthesize with Phase 5 responsive screenshots.

**Document structure:**

1. **Breakpoint Definitions:**

   | Breakpoint | Media Query | Classification | Source Files |
   |------------|-------------|----------------|--------------|
   | Mobile | max-width: 600px | Small phones | Header.css:251, BookingBlock.css:244, TimeStrip.css:26 |
   | Tablet | max-width: 768px | Tablets, large phones | BookingPanel.css:147, BookingPopup.css:244, WeekView.css:174 |
   | Desktop | 769px+ (no media query, default) | Laptops, monitors | All files (default styles) |

   Note: The project uses TWO breakpoints (600px and 768px), not the three mentioned in some planning docs. Document the actual CSS values, not assumptions.

2. **Per-Component Responsive Changes:**

   **Header (max-width: 600px):**
   | Property | Desktop | Mobile | Source |
   |----------|---------|--------|--------|
   | Padding | 16px 32px | 16px | Header.css:252-254 |
   | header-top layout | flex row (space-between) | flex column (stacked, 12px gap) | Header.css:256-259 |
   | Keyboard hints bar | Visible (glass container) | Hidden (display: none) | Header.css:261-263 |
   | Week toggle button | Visible | Hidden (display: none) | Header.css:265-267 |
   | Timezone toggle | padding 10px 20px, font 0.9rem | padding 8px 12px, font 0.8rem | Header.css:269-272 |
   Screenshot comparison: 06-responsive/desktop-full-page.png vs 06-responsive/mobile-full-page.png

   **TimeStrip (max-width: 600px):**
   | Property | Desktop | Mobile | Source |
   |----------|---------|--------|--------|
   | Width | 360px (fixed) | 100% (fluid) | TimeStrip.css:26-33 |
   | Padding | 12px | 16px | TimeStrip.css:29 |
   | Margin | 0 (centered by parent) | 0 12px (side margins) | TimeStrip.css:31 |

   **BookingBlock (max-width: 600px):**
   | Property | Desktop | Mobile | Source |
   |----------|---------|--------|--------|
   | Padding | 12px 20px | 10px 16px | BookingBlock.css:244-248 |
   | Info font size | 0.875rem | 0.8rem | BookingBlock.css:249-251 |
   | Cancel hint font | 0.75rem | 0.7rem | BookingBlock.css:253-255 |

   **BookingPanel (max-width: 768px):**
   | Property | Desktop | Tablet/Mobile | Source |
   |----------|---------|---------------|--------|
   | Width | 340px | 100% (full screen) | BookingPanel.css:147-152 |
   Screenshot: 06-responsive/mobile-with-panel.png (shows full-screen panel with dark backdrop)

   **BookingPopup (max-width: 768px):**
   | Property | Desktop | Tablet/Mobile | Source |
   |----------|---------|---------------|--------|
   | Width | 340px, max-width 90vw | 100%, max-width calc(100vw - 32px) | BookingPopup.css:244-249 |

   **WeekView (max-width: 768px):**
   | Property | Desktop | Tablet | Source |
   |----------|---------|--------|--------|
   | Grid columns | 70px + 7 equal | 60px + 7 equal | WeekView.css:179-181 |
   | Time cell font | 0.7rem, 30px height | 0.65rem, 28px height | WeekView.css:183-186 |
   | Column header height | 50px | 52px (taller for touch) | WeekView.css:188-190 |
   | Day name font | 0.7rem | 0.6rem | WeekView.css:192-194 |
   | Day date font | 1.1rem | 0.9rem | WeekView.css:196-198 |
   | Slot height | 30px | 28px | WeekView.css:200-202 |
   Screenshot: 06-responsive/tablet-full-page.png

3. **Mobile-Specific Behaviors:**

   **Full-Screen Booking Panel:**
   - On mobile, booking panel takes full viewport width (100%)
   - Dark backdrop overlay behind panel (from BookingPopup.css overlay pattern)
   - Body scroll is locked (body.modal-open: overflow hidden, position fixed)
   - Panel slides in from right edge (same animation, just full width)
   - Screenshot: 06-responsive/mobile-with-panel.png

   **Hidden Elements on Mobile:**
   - Keyboard hints bar: Hidden (display: none). Rationale: mobile users don't have keyboards
   - Week toggle button: Hidden (display: none). Rationale: week view is too compressed on small screens
   - These elements are hidden via CSS only (no conditional rendering)

   **Touch Target Considerations:**
   - Time slots maintain 36px height (adequate touch target per 44px WCAG guideline)
   - Buttons maintain similar sizing (padding ensures touch area)
   - Week view column headers increase to 52px on tablet (touch-friendly)
   - No tap-specific interactions documented (touch = click equivalence)

4. **Viewport Screenshots Comparison:**

   | Viewport | Width | Screenshot | Key Differences |
   |----------|-------|------------|-----------------|
   | Desktop | 1440px | 06-responsive/desktop-full-page.png | Full header, centered 360px grid, hints bar visible |
   | Tablet | 768px | 06-responsive/tablet-full-page.png | Compact header, smaller text sizes, larger touch targets |
   | Mobile | 375px | 06-responsive/mobile-full-page.png | Stacked header, full-width grid, no hints/week toggle |
   | Mobile + Panel | 375px | 06-responsive/mobile-with-panel.png | Full-screen panel overlay with backdrop |

5. **What Does NOT Change Across Breakpoints:**
   - Color palette (same tokens at all sizes)
   - Font families (DM Sans + JetBrains Mono)
   - Animation timings (same durations/easings)
   - Slot state styling (same colors/borders/shadows)
   - Booking flow steps (same user -> duration -> confirm)
   - Keyboard shortcuts (active on any device with keyboard)

**Include exact CSS media query syntax for each breakpoint.** Reference Phase 5 screenshots for visual comparison.
  </action>
  <verify>
Verify the document:
1. Grep for "@media" or "max-width" -- must document both breakpoints (600px, 768px)
2. Grep for "06-responsive/" -- must reference all 4 responsive screenshots
3. Count components with responsive changes documented -- must be >= 6 (Header, TimeStrip, BookingBlock, BookingPanel, BookingPopup, WeekView)
4. Grep for "display: none" or "Hidden" -- must document hidden elements on mobile
5. Grep for "full-screen" or "100%" -- must document mobile panel behavior
6. Verify line count >= 80 lines
  </verify>
  <done>
RESPONSIVE-BEHAVIOR.md exists with: both breakpoints defined (600px, 768px), per-component change tables for 6+ components, mobile-specific behaviors (full-screen panel, hidden elements), viewport screenshot comparison table, and list of what remains unchanged. Every change references CSS source and screenshots.
  </done>
</task>

</tasks>

<verification>
Phase 7 Plan 03 verification:
1. KEYBOARD-SHORTCUTS.md and RESPONSIVE-BEHAVIOR.md exist in the phase directory
2. Keyboard doc covers all 3 interaction modes with complete shortcut tables
3. Keyboard doc documents dynamic user hotkeys from config
4. Responsive doc covers both breakpoints (600px, 768px) with per-component changes
5. Responsive doc references all 4 responsive screenshots
6. Both docs are technology-neutral (no React-specific language)
7. Both docs have CSS source references for all claims
</verification>

<success_criteria>
- KEYBOARD-SHORTCUTS.md >= 100 lines with complete shortcut reference across all 3 modes
- RESPONSIVE-BEHAVIOR.md >= 80 lines with both breakpoints and 6+ component adaptations
- Both docs are technology-neutral
- A Rails developer reading these docs knows: every keyboard shortcut with its conditions, and how to make the layout responsive at every breakpoint
</success_criteria>

<output>
After completion, create `.planning/phases/07-ui-ux-documentation/07-03-SUMMARY.md`
</output>

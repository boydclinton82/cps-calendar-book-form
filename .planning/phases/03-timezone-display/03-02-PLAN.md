---
phase: 03-timezone-display
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/hooks/useKeyboard.js
  - src/App.jsx
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Pressing B key triggers Book Now action"
    - "Pressing T key toggles timezone display"
    - "Hotkeys work identically to clicking the buttons"
  artifacts:
    - path: "src/hooks/useKeyboard.js"
      provides: "B and T key handlers"
      contains: "key === 'b'"
---

<objective>
Add missing hotkey handlers for [B] Book Now and [T] Timezone Toggle.

The buttons display hotkey hints ([B], [T]) but pressing the keys does nothing. The useKeyboard hook needs these handlers added.
</objective>

<context>
@src/hooks/useKeyboard.js - Existing keyboard handler, has 'w' for week toggle but missing 'b' and 't'
@src/App.jsx - Has handleBookNow and handleTimezoneToggle callbacks that need to be passed to useKeyboard

**Pattern:** Follow existing 'w' key handler at line 112-116:
```javascript
if (key === 'w' && onWeekToggle) {
  e.preventDefault();
  onWeekToggle();
  return;
}
```
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add B and T hotkey handlers to useKeyboard</name>
  <files>src/hooks/useKeyboard.js</files>
  <action>
1. Add `onBookNow` and `onTimezoneToggle` to the function parameters (after `onWeekToggle`)

2. Add 'b' key handler after the 'w' handler (around line 116):
```javascript
// Book Now: B key
if (key === 'b' && onBookNow) {
  e.preventDefault();
  onBookNow();
  return;
}
```

3. Add 't' key handler after the 'b' handler:
```javascript
// Timezone toggle: T key
if (key === 't' && onTimezoneToggle) {
  e.preventDefault();
  onTimezoneToggle();
  return;
}
```

4. Add `onBookNow, onTimezoneToggle` to the useCallback dependency array
  </action>
  <verify>
Grep for `key === 'b'` and `key === 't'` in useKeyboard.js
  </verify>
  <done>
useKeyboard.js handles B and T keys when handlers are provided.
  </done>
</task>

<task type="auto">
  <name>Task 2: Pass hotkey handlers from App.jsx to useKeyboard</name>
  <files>src/App.jsx</files>
  <action>
Find the useKeyboard call in App.jsx and add the new props:

```javascript
useKeyboard({
  ...existing props...,
  onBookNow: showBookNow ? handleBookNow : undefined,
  onTimezoneToggle: handleTimezoneToggle,
});
```

Note: onBookNow should only be active when showBookNow is true (current hour is available).
  </action>
  <verify>
Run `npm run dev`, press B key - should open booking panel for current hour.
Press T key - should toggle timezone display.
  </verify>
  <done>
B and T hotkeys work. B opens Book Now panel (when available), T toggles timezone.
  </done>
</task>

</tasks>

<verification>
1. Press B key - opens booking panel for current hour (same as clicking Book Now)
2. Press B key when current hour is booked - nothing happens (correct)
3. Press T key - toggles between QLD and NSW display
4. Hotkeys don't fire when typing in an input field
</verification>

<success_criteria>
- [B] hotkey triggers handleBookNow when current hour is available
- [T] hotkey triggers handleTimezoneToggle
- Both work identically to clicking the buttons
</success_criteria>

<output>
After completion, create `.planning/phases/03-timezone-display/03-02-SUMMARY.md`
</output>
